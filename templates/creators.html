{% extends 'base.html' %}
{% block content%}
{% load humanize %}
<h3 class="deco">Creators List</h3>

<form method="get" action="{% url 'app:creators' %}">
<input type="hidden" name="page" value="{{page}}">
{{form}}
<input type="submit" class="btn btn-primary" value="Filter">
</form>

<div class="div-equal-box">
<div>
{% if page > 10 %}
<a href="{% url 'app:creators' %}?page={{page|add:-10}}{% if word != '' %}&word={{word}}{% endif %}{% if free_only %}&free_only=on{% endif %}">
<<
</a>
{% endif %}
</div>
<div>
{% if page > 1 %}
<a href="{% url 'app:creators' %}?page={{page|add:-1}}{% if word != '' %}&word={{word}}{% endif %}{% if free_only %}&free_only=on{% endif %}">
<
</a>
{% endif %}
</div>
<div>
page {{page}}
</div>
<div>
<a href="{% url 'app:creators' %}?page={{page|add:1}}{% if word != '' %}&word={{word}}{% endif %}{% if free_only %}&free_only=on{% endif %}">
>
</a>
</div>
<div>
<a href="{% url 'app:creators' %}?page={{page|add:10}}{% if word != '' %}&word={{word}}{% endif %}{% if free_only %}&free_only=on{% endif %}">
>>
</a>
</div>
</div>
<p>
{% for creator in creators %}
<div class="creator">
<p>
<a href="{% url 'app:creator' creator_id=creator.creator_id  %}">
{{creator}}
</a>
<ul>
{% if creator.avatars.all|length > 0 %}
<li>Avatars</li>
<ul>
{% for avatar in creator.avatars.all|dictsort:"price" %} 
<li>
<a href="{% url 'app:avatar' avatar_id=avatar.avatar_id%}">
{{avatar}}
</a>
{% if avatar.price > 0 %}
<span class="price">
\ {{avatar.price|intcomma}}
</span>
{% else %}
<span class="free">
\ Free
</span>
{% endif %}
{% if avatar.items.all|length > 0 %}
対応アイテム 
<span class="price">
{{avatar.items.all|length}} 
</span>
点
{% endif %}
</li>
{% endfor %}
</ul>
{% endif %}
{% if creator.items.all|length > 0 %}
<li>Items</li>
<ul>
{% for item in creator.items.all|dictsort:"price" %}
<li>
<a href="{% url 'app:item' item_id=item.item_id%}">
{{item}}
</a>
{% if item.price > 0 %}
<span class="price">
\ {{item.price|intcomma}}
</span>
{% else %}
<span class="free">
\ Free
</span>
{% endif %}
{% if item.avatar.all|length > 0 %}
対応アバター 
<span class="price">
{{item.avatar.all|length}} 
</span>
 体
{% endif %}
</li>
{% endfor %}
</ul>
{% endif %}
</ul>
</p>
</div>
{% endfor %}
<div class="div-equal-box">
<div>
{% if page > 10 %}
<a href="{% url 'app:creators' %}?page={{page|add:-10}}{% if word != '' %}&word={{word}}{% endif %}{% if free_only %}&free_only=on{% endif %}">
<<
</a>
{% endif %}
</div>
<div>
{% if page > 1 %}
<a href="{% url 'app:creators' %}?page={{page|add:-1}}{% if word != '' %}&word={{word}}{% endif %}{% if free_only %}&free_only=on{% endif %}">
<
</a>
{% endif %}
</div>
<div>
page {{page}}
</div>
<div>
<a href="{% url 'app:creators' %}?page={{page|add:1}}{% if word != '' %}&word={{word}}{% endif %}{% if free_only %}&free_only=on{% endif %}">
>
</a>
</div>
<div>
<a href="{% url 'app:creators' %}?page={{page|add:10}}{% if word != '' %}&word={{word}}{% endif %}{% if free_only %}&free_only=on{% endif %}">
>>
</a>
</div>
</div>

{% endblock %}